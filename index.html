<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chúc Mừng Năm Mới Bính Ngọ</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Be+Vietnam+Pro&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#fbf3df;
  font-family:'Be Vietnam Pro',sans-serif;
}

/* ================= PHONG BÌ ================= */
.wrapper{text-align:center}

.envelope{
  position:relative;
  width:280px;
  height:160px;
  background:#d32f2f;
  border-radius:0 0 18px 18px;
  box-shadow:0 16px 35px rgba(0,0,0,.28);
  overflow:hidden;
}

/* NẮP – GẮN TRỰC TIẾP VÀO THÂN */
.envelope::before{
  content:'';
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:80px; /* = 50% thân */
  background:#c62828;

  /* tam giác cân CHUẨN */
  clip-path:polygon(0 0,50% 100%,100% 0);

  transform-origin:top center;
  transition:transform .9s ease;
  z-index:2;
}

/* MỞ */
.envelope.open::before{
  transform:rotateX(180deg);
}

/* NÚT */
button{
  margin-top:22px;
  padding:12px 28px;
  border:none;
  border-radius:30px;
  background:#d32f2f;
  color:#fff;
  font-size:16px;
  cursor:pointer;
}

/* ================= THIỆP ================= */
.card{
  position:fixed;
  inset:0;
  display:none;
  justify-content:center;
  align-items:center;
  background:url('tet-bg.png') center/cover no-repeat;
}

.card.show{display:flex}

.card::after{
  content:'';
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.12); /* sáng hơn */
}

.content{
  position:relative;
  max-width:720px;
  margin:20px;
  background:rgba(255,255,250,.98);
  padding:36px;
  border-radius:22px;
  text-align:center;
  box-shadow:0 20px 45px rgba(0,0,0,.3);
  z-index:2;
}

h1{
  font-family:'Great Vibes',cursive;
  font-size:44px;
  color:#b71c1c;
  margin-bottom:18px;
}

p{
  font-size:17px;
  line-height:1.75;
  color:#4e342e;
}

/* PHÁO HOA */
canvas{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:1;
}

/* MOBILE */
@media(max-width:600px){
  .envelope{width:240px;height:140px}
  .envelope::before{height:70px}
  h1{font-size:34px}
  p{font-size:15px}
}
</style>
</head>

<body>

<div class="wrapper" id="wrap">
  <div class="envelope" id="env"></div>
  <button id="openBtn">Mở Thiệp</button>
</div>

<div class="card" id="card">
  <canvas id="fw"></canvas>
  <div class="content">
    <h1>Chúc Mừng Năm Mới Bính Ngọ</h1>
    <p id="wish"></p>
  </div>
</div>

<audio id="music" src="tet-music.mp3" loop></audio>

<script>
const wishes=[
"Chúc năm mới sức khỏe dồi dào, học tập tiến bộ, tinh thần vững vàng và luôn tràn đầy niềm vui trong cuộc sống.",
"Xuân mới đến mang theo hy vọng mới, chúc bạn gặt hái nhiều thành công và giữ mãi đam mê trên con đường học tập."
];
document.getElementById("wish").innerText=
wishes[Math.floor(Math.random()*wishes.length)];

const env=document.getElementById("env");
const card=document.getElementById("card");
const music=document.getElementById("music");

document.getElementById("openBtn").onclick=()=>{
  env.classList.add("open");

  setTimeout(()=>{
    document.getElementById("wrap").style.display="none";
    card.classList.add("show");

    music.volume=0;
    music.play();
    let v=0;
    const fade=setInterval(()=>{
      if(v>=0.7) clearInterval(fade);
      music.volume=v+=0.02;
    },120);

    fireworks();
  },900);
};

/* PHÁO HOA TIA */
const canvas=document.getElementById("fw");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;
onresize=()=>{canvas.width=innerWidth;canvas.height=innerHeight};

let ps=[];
function boom(){
  const x=Math.random()*canvas.width;
  const y=Math.random()*canvas.height/2;
  const colors=["#ffeb3b","#ff5722","#ff9800","#e91e63","#ffc107"];
  for(let i=0;i<100;i++){
    ps.push({x,y,
      vx:(Math.random()-.5)*7,
      vy:(Math.random()-.5)*7,
      l:110,
      c:colors[Math.floor(Math.random()*colors.length)]
    });
  }
}
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ps.forEach((p,i)=>{
    p.x+=p.vx;p.y+=p.vy;p.l--;
    ctx.fillStyle=p.c;
    ctx.fillRect(p.x,p.y,2,2);
    if(p.l<=0) ps.splice(i,1);
  });
  requestAnimationFrame(draw);
}
function fireworks(){
  setInterval(boom,900);
  draw();
}
</script>

</body>
</html>
