<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch√∫c M·ª´ng NƒÉm M·ªõi B√≠nh Ng·ªç</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">

    <style>
        * { box-sizing: border-box; }
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #fbf3e6;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
        }

        /* ================= PHONG B√å GI·ªêNG ·∫¢NH M·∫™U ================= */
        #envelope-screen {
            text-align: center;
            transition: opacity 0.8s ease;
            z-index: 10;
        }

        .envelope-container {
            position: relative;
            width: 300px;
            height: 200px;
            background: #b71c1c; /* L·ªõp n·ªÅn ph√≠a sau */
            border-radius: 5px 5px 15px 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin: 0 auto;
        }

        /* N·∫Øp phong b√¨ (Tam gi√°c tr√™n) */
        .flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            border-left: 150px solid transparent;
            border-right: 150px solid transparent;
            border-top: 110px solid #d32f2f; /* M√†u n·∫Øp */
            transform-origin: top;
            transition: transform 0.6s ease;
            z-index: 3;
        }

        /* L·ªõp th√¢n ph√≠a tr∆∞·ªõc (T√∫i ƒë·ª±ng) */
        .pocket {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #d32f2f;
            border-radius: 0 0 15px 15px;
            /* T·∫°o h√¨nh c·∫Øt v√°t cho gi·ªëng ·∫£nh */
            clip-path: polygon(0 40%, 50% 70%, 100% 40%, 100% 100%, 0 100%);
            z-index: 2;
        }

        /* T·∫•m thi·ªáp nh·ªè tr∆∞·ª£t ra */
        .letter-preview {
            position: absolute;
            top: 10%;
            left: 5%;
            width: 90%;
            height: 80%;
            background: #fff;
            border-radius: 5px;
            z-index: 1;
            transition: transform 0.8s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #d32f2f;
            font-size: 12px;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
        }

        /* Tr·∫°ng th√°i m·ªü */
        .open .flap {
            transform: rotateX(180deg);
            z-index: 0;
        }
        .open .letter-preview {
            transform: translateY(-100px);
        }

        .btn-open {
            margin-top: 50px;
            padding: 12px 40px;
            background: #c62828;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        /* ================= TRANG THI·ªÜP CH√çNH ================= */
        #card-screen {
            position: fixed;
            inset: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            background: url("tet-bg.png") center/cover no-repeat;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1.2s ease;
            z-index: 5;
        }

        #card-screen.show { opacity: 1; pointer-events: auto; }

        .card-content {
            background: rgba(255, 255, 255, 0.95);
            width: 90%;
            max-width: 500px;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            border: 3px solid #ffd700;
        }

        .card-content h1 {
            font-family: 'Dancing Script', cursive;
            color: #b71c1c;
            font-size: 38px;
            margin: 0 0 15px 0;
        }

        /* ================= HI·ªÜU ·ª®NG SAU KHI M·ªû ================= */
        .flower {
            position: absolute;
            pointer-events: none;
            z-index: 15;
            animation: fall linear forwards;
        }
        @keyframes fall {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
        }

        .particle {
            position: absolute;
            width: 5px; height: 5px; border-radius: 50%;
            animation: explode 1.2s ease-out forwards;
            z-index: 20;
        }
        @keyframes explode {
            0% { transform: translate(0,0); opacity: 1; }
            100% { transform: translate(var(--dx), var(--dy)); opacity: 0; }
        }
    </style>
</head>
<body>

    <div id="envelope-screen">
        <div class="envelope-container" id="env-box">
            <div class="flap"></div>
            <div class="letter-preview">üßß ƒêang g·ª≠i...</div>
            <div class="pocket"></div>
        </div>
        <button class="btn-open" onclick="openEnvelope()">M·ªü Thi·ªáp</button>
    </div>

    <div id="card-screen">
        <div class="card-content">
            <h1>Ch√∫c M·ª´ng NƒÉm M·ªõi B√≠nh Ng·ªç</h1>
            <p id="wish-text" style="font-size: 18px; line-height: 1.6; color: #333;"></p>
            <div style="font-size: 35px; margin-top: 15px;">üßßüå∏üß®</div>
        </div>
    </div>

    <audio id="music" src="tet-music.mp3" loop></audio>

    <script>
        const wishes = [
            "Ch√∫c b·∫°n nƒÉm m·ªõi gi·ªØ v·ªØng ƒë∆∞·ª£c t√¢m th·∫ø b√¨nh th·∫£n tr∆∞·ªõc m·ªçi th·ª≠ th√°ch v√† g·∫∑t h√°i th√†nh c√¥ng r·ª±c r·ª° tr√™n con ƒë∆∞·ªùng tri th·ª©c!",
            "NƒÉm m·ªõi, ch√∫c b·∫°n t√¨m th·∫•y s·ª± c√¢n b·∫±ng gi·ªØa h·ªçc t·∫≠p v√† cu·ªôc s·ªëng. Thi ƒë√¢u th·∫Øng ƒë√≥, v·∫°n s·ª± nh∆∞ √Ω!",
            "Ch√∫c b·∫°n tr√≠ tu·ªá s√°ng su·ªët, t√¢m h·ªìn phong ph√∫ v√† t·∫≠n h∆∞·ªüng tr·ªçn v·∫πn t·ª´ng kho·∫£nh kh·∫Øc h·∫°nh ph√∫c c·ªßa nƒÉm m·ªõi B√≠nh Ng·ªç!"
        ];

        function openEnvelope() {
            const envBox = document.getElementById("env-box");
            envBox.classList.add("open");

            // Sau khi hi·ªáu ·ª©ng tr∆∞·ª£t k·∫øt th√∫c m·ªõi chuy·ªÉn m√†n h√¨nh
            setTimeout(() => {
                document.getElementById("envelope-screen").style.opacity = "0";
            }, 1000);

            setTimeout(() => {
                document.getElementById("envelope-screen").style.display = "none";
                document.getElementById("card-screen").classList.add("show");
                document.getElementById("wish-text").innerText = wishes[Math.floor(Math.random() * wishes.length)];
                
                startEverything(); // Ch·ªâ b·∫Øt ƒë·∫ßu hoa r∆°i v√† ph√°o sau khi m·ªü thi·ªáp
            }, 1800);
        }

        function startEverything() {
            // 1. Ch·∫°y nh·∫°c
            const m = document.getElementById("music");
            m.volume = 0.4;
            m.play().catch(() => {});

            // 2. Ch·∫°y hoa r∆°i
            setInterval(createFlower, 400);

            // 3. Ch·∫°y ph√°o hoa
            setInterval(createFirework, 600);
        }

        function createFlower() {
            const f = document.createElement('div');
            f.className = 'flower';
            f.innerHTML = Math.random() > 0.5 ? 'üå∏' : 'üåº';
            f.style.left = Math.random() * 100 + 'vw';
            f.style.fontSize = (Math.random() * 15 + 15) + 'px';
            const duration = Math.random() * 3 + 4;
            f.style.animationDuration = duration + 's';
            document.body.appendChild(f);
            setTimeout(() => f.remove(), duration * 1000);
        }

        function createFirework() {
            const x = Math.random() * window.innerWidth;
            const y = Math.random() * window.innerHeight;
            const colors = ['#ff0044', '#ffe100', '#00ff88', '#00ccff', '#ffffff', '#ff00ff'];
            const color = colors[Math.floor(Math.random() * colors.length)];

            for (let i = 0; i < 60; i++) {
                const p = document.createElement("div");
                p.className = "particle";
                p.style.backgroundColor = color;
                p.style.left = x + "px";
                p.style.top = y + "px";
                p.style.boxShadow = `0 0 10px ${color}`;
                const angle = (i / 30) * Math.PI;
                const dist = Math.random() * 200 + 50;
                p.style.setProperty('--dx', Math.cos(angle) * dist + "px");
                p.style.setProperty('--dy', Math.sin(angle) * dist + "px");
                document.body.appendChild(p);
                setTimeout(() => p.remove(), 1200);
            }
        }
    </script>
</body>
</html>
