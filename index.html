<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chúc Mừng Năm Mới Bính Ngọ</title>

<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#fbf3e6;
  overflow:hidden;
  font-family:Arial, sans-serif;
}

/* ================= PHONG BÌ ================= */
#envelope-screen{
  text-align:center;
  transition:opacity .8s ease;
}

.envelope{
  width:300px;
  max-width:80vw;
  position:relative;
  perspective:1000px;
}

/* Thân phong bì */
.envelope-body{
  width:100%;
  height:180px;
  background:#d32f2f;
  border-radius:0 0 20px 20px;
  position:relative;
  z-index:1;
}

/* NẮP PHONG BÌ – FIX CHUẨN */
.envelope-flap{
  width:0;
  height:0;
  border-left:150px solid transparent;
  border-right:150px solid transparent;
  border-bottom:90px solid #b71c1c;
  position:absolute;
  top:-90px;
  left:0;
  transform-origin:bottom center;
  transform:rotateX(180deg); /* ⬅️ MẶC ĐỊNH: ĐÓNG */
  transition:transform .9s ease;
  z-index:2;
}

/* Khi bấm mở */
.open .envelope-flap{
  transform:rotateX(0deg); /* ⬅️ MỞ LÊN */
}

button{
  margin-top:20px;
  padding:12px 34px;
  border:none;
  border-radius:999px;
  background:#c62828;
  color:#fff;
  font-size:16px;
  cursor:pointer;
}

/* ================= THIỆP ================= */
#card-screen{
  position:fixed;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  background:url("tet-bg.png") center/cover no-repeat;
  opacity:0;
  pointer-events:none;
  transition:opacity 1s ease;
}

#card-screen.show{
  opacity:1;
  pointer-events:auto;
}

.card{
  background:#ffffffee;
  width:90%;
  max-width:560px;
  padding:34px 28px;
  border-radius:22px;
  text-align:center;
  box-shadow:0 30px 60px rgba(0,0,0,.35);
}

h1{
  font-family:'Dancing Script', cursive;
  font-size:38px;
  color:#b71c1c;
  margin-bottom:16px;
}

p{
  font-size:16px;
  line-height:1.7;
  color:#333;
}

/* ================= PHÁO HOA ================= */
.firework {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 4px;
            height: 4px;
        }

        /* Tạo các hạt pháo hoa bằng box-shadow đa tầng */
        .firework, .firework::before, .firework::after {
            content: "";
            position: absolute;
            border-radius: 50%;
            /* Mỗi dòng trong box-shadow là một "viên pháo" 
               Cấu trúc: x y color 
            */
            box-shadow: 
                0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 
                0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff;
            animation: explode 2s infinite ease-out;
        }

        /* Tầng pháo hoa thứ 2 (màu sắc khác) */
        .firework::before {
            animation-duration: 2.5s;
            animation-delay: -0.5s;
        }

        /* Tầng pháo hoa thứ 3 (nhỏ hơn, bay xa hơn) */
        .firework::after {
            animation-duration: 3s;
            animation-delay: -1.2s;
        }

        @keyframes explode {
            0% {
                /* Bắt đầu tại tâm */
                box-shadow: 0 0 #fff;
                opacity: 1;
            }
            100% {
                /* Bắn tung ra nhiều hướng với nhiều màu sắc */
                box-shadow: 
                    -120px -150px #ff0044, 120px -150px #ffdd00, 
                    -180px 20px #00ff88, 180px 20px #00ccff, 
                    -50px 180px #ff00ff, 50px 180px #ff8800,
                    -150px -50px #ffffff, 150px -50px #aa00ff,
                    0px -200px #ffff00, 0px 200px #00ffff;
                opacity: 0;
            }
        }

        /* Đặt nhiều bông pháo ở các vị trí khác nhau */
        .f1 { top: 30%; left: 20%; }
        .f2 { top: 50%; left: 70%; scale: 1.5; }
        .f3 { top: 70%; left: 40%; scale: 0.8; }

        h1 {
            color: white;
            font-family: 'Arial', sans-serif;
            text-transform: uppercase;
            letter-spacing: 5px;
            text-shadow: 0 0 20px #ff0044;
            pointer-events: none;
        }
    </style>
</head>
<body>

    <h1>Chúc Mừng Năm Mới</h1>

    <div class="firework f1"></div>
    <div class="firework f2"></div>
    <div class="firework f3"></div>

</body>

<!-- PHONG BÌ -->
<div id="envelope-screen">
  <div class="envelope" id="env">
    <div class="envelope-flap"></div>
    <div class="envelope-body"></div>
  </div>
  <button onclick="openCard()">Mở Thiệp</button>
</div>

<!-- THIỆP -->
<div id="card-screen">
  <div class="card">
    <h1>Chúc Mừng Năm Mới Bính Ngọ</h1>
    <p id="wish"></p>
  </div>
</div>

<audio id="music" src="tet-music.mp3" loop></audio>

<script>
const wishes=[
"Chúc bạn năm mới giữ vững được tâm thế bình thản trước mọi thử thách của cuộc sống và sự minh mẫn trên con đường học vấn. Mong rằng mỗi giọt mồ hôi bên trang sách sẽ đổi lấy những nấc thang thành công rực rỡ, và mỗi trải nghiệm cuộc đời đều giúp bạn trưởng thành, bản lĩnh hơn.",
"Năm mới, chúc bạn tìm thấy sự cân bằng tuyệt vời giữa việc nâng tầm tri thức và tận hưởng cuộc sống. Mong bạn học thêm được nhiều điều hay, thi đâu thắng đó, nhưng cũng không quên dành thời gian để yêu thương bản thân và cảm nhận những vẻ đẹp giản đơn xung quanh mình.",
"Chúc bạn năm mới: Trí tuệ sáng suốt để chinh phục mọi đỉnh cao tri thức, và tâm hồn phong phú để tận hưởng trọn vẹn từng khoảnh khắc quý giá của cuộc sống. Học thành tài, sống hạnh phúc!"
];

function openCard(){
  document.getElementById("env").classList.add("open");

  setTimeout(()=>{
    document.getElementById("envelope-screen").style.opacity="0";
  },800);

  setTimeout(()=>{
    document.getElementById("envelope-screen").style.display="none";
    document.getElementById("card-screen").classList.add("show");
    document.getElementById("wish").innerText =
      wishes[Math.floor(Math.random()*wishes.length)];
    playMusic();
    fireworks();
  },1400);
}

function playMusic(){
  const m=document.getElementById("music");
  m.volume=0;
  m.play();
  let v=0;
  const fade=setInterval(()=>{
    if(v<1){v+=0.03;m.volume=v}
    else clearInterval(fade);
  },100);
}

function fireworks(){
  setInterval(()=>{
    const f=document.createElement("div");
    f.className="firework";
    f.style.left=Math.random()*100+"vw";
    f.style.top=Math.random()*100+"vh";
    f.style.background=`hsl(${Math.random()*360},100%,60%)`;
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),1300);
  },200);
}
</script>

</body>
</html>
