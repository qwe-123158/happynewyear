<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chúc Mừng Năm Mới Bính Ngọ</title>

<!-- FONT -->
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Be+Vietnam+Pro:wght@400;600&display=swap" rel="stylesheet">

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Be Vietnam Pro', sans-serif;
}

body{
  min-height:100vh;
  background:#fbf3df;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
}

/* ===== PHONG BÌ ===== */
.envelope-wrap{
  text-align:center;
  z-index:10;
}

.envelope{
  position:relative;
  width:280px;
  height:180px;
  margin:auto;
}

/* THÂN */
.env-body{
  position:absolute;
  bottom:0;
  width:100%;
  height:140px;
  background:#d32f2f;
  border-radius:0 0 14px 14px;
  box-shadow:0 10px 25px rgba(0,0,0,.25);
  z-index:1;
}

/* NẮP – ĐÃ FIX LỆCH */
.env-flap{
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:140px;
  background:#c62828;
  clip-path:polygon(0 0,100% 0,50% 55%);
  transform:translateY(22px);
  transform-origin:top center;
  transition:transform .9s ease;
  z-index:3;
}

.open .env-flap{
  transform:translateY(22px) rotateX(180deg);
}

/* NÚT */
.open-btn{
  margin-top:20px;
  padding:10px 26px;
  border:none;
  border-radius:30px;
  background:#d32f2f;
  color:white;
  font-size:16px;
  cursor:pointer;
}

/* ===== THIỆP ===== */
.card{
  position:fixed;
  inset:0;
  display:none;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  padding:20px;
  background:url('tet-bg.png') center/cover no-repeat;
}

.card.show{
  display:flex;
}

.card::after{
  content:'';
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.25);
}

.card-content{
  position:relative;
  max-width:700px;
  background:rgba(255,248,230,.95);
  padding:30px 25px;
  border-radius:18px;
  box-shadow:0 15px 40px rgba(0,0,0,.3);
  z-index:2;
}

h1{
  font-family:'Great Vibes', cursive;
  font-size:42px;
  color:#b71c1c;
  margin-bottom:15px;
}

p{
  font-size:17px;
  line-height:1.7;
  color:#5d4037;
}

/* ===== PHÁO HOA ===== */
canvas{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:1;
}

/* ===== MOBILE ===== */
@media(max-width:600px){
  h1{font-size:32px;}
  p{font-size:15px;}
  .envelope{width:240px;}
}
</style>
</head>

<body>

<div class="envelope-wrap" id="envelopeWrap">
  <div class="envelope" id="envelope">
    <div class="env-flap" id="flap"></div>
    <div class="env-body"></div>
  </div>
  <button class="open-btn" id="openBtn">Mở Thiệp</button>
</div>

<div class="card" id="card">
  <canvas id="fireworks"></canvas>
  <div class="card-content">
    <h1>Chúc Mừng Năm Mới Bính Ngọ</h1>
    <p id="wish"></p>
  </div>
</div>

<audio id="music" src="music.mp3" loop></audio>

<script>
/* ===== LỜI CHÚC ===== */
const wishes=[
"Chúc năm mới tràn đầy năng lượng, học tập tiến bộ từng ngày, luôn giữ vững ước mơ và niềm tin vào bản thân. Mong bạn gặp nhiều may mắn, sức khỏe dồi dào và thành công trên con đường phía trước.",
"Xuân về mang theo niềm vui mới, chúc bạn học tập thật tốt, tinh thần luôn lạc quan, mỗi ngày đều là một bước tiến vững chắc đến tương lai tươi sáng."
];

document.getElementById('wish').innerText=
wishes[Math.floor(Math.random()*wishes.length)];

const btn=document.getElementById('openBtn');
const env=document.getElementById('envelope');
const card=document.getElementById('card');
const music=document.getElementById('music');

btn.onclick=()=>{
  env.classList.add('open');

  setTimeout(()=>{
    document.getElementById('envelopeWrap').style.display='none';
    card.classList.add('show');
    startFireworks();

    music.volume=0;
    music.play();
    let v=0;
    const fade=setInterval(()=>{
      if(v>=0.7) clearInterval(fade);
      music.volume=v+=0.02;
    },120);
  },900);
};

/* ===== PHÁO HOA TIA ===== */
const canvas=document.getElementById('fireworks');
const ctx=canvas.getContext('2d');

function resize(){
  canvas.width=window.innerWidth;
  canvas.height=window.innerHeight;
}
resize();window.onresize=resize;

let particles=[];
function firework(){
  const x=Math.random()*canvas.width;
  const y=Math.random()*canvas.height/2;
  const colors=['#ffeb3b','#ff5722','#ff9800','#e91e63'];

  for(let i=0;i<80;i++){
    particles.push({
      x,y,
      vx:(Math.random()-0.5)*6,
      vy:(Math.random()-0.5)*6,
      life:100,
      color:colors[Math.floor(Math.random()*colors.length)]
    });
  }
}

function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach((p,i)=>{
    p.x+=p.vx;
    p.y+=p.vy;
    p.life--;
    ctx.fillStyle=p.color;
    ctx.fillRect(p.x,p.y,2,2);
    if(p.life<=0) particles.splice(i,1);
  });
  requestAnimationFrame(animate);
}

function startFireworks(){
  setInterval(firework,800);
  animate();
}
</script>

</body>
</html>
