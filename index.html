<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chúc Mừng Năm Mới Bính Ngọ</title>

<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#fbf3e6;
  overflow:hidden;
  font-family:Arial, sans-serif;
}

/* ================= PHONG BÌ ================= */
#envelope-screen{
  text-align:center;
  transition:opacity .8s ease;
}

.envelope{
  width:300px;
  max-width:80vw;
  position:relative;
  perspective:1000px;
}

/* Thân phong bì */
.envelope-body{
  width:100%;
  height:180px;
  background:#d32f2f;
  border-radius:0 0 20px 20px;
  position:relative;
  z-index:1;
}

/* NẮP PHONG BÌ – FIX CHUẨN */
.envelope-flap{
  width:0;
  height:0;
  border-left:150px solid transparent;
  border-right:150px solid transparent;
  border-bottom:90px solid #b71c1c;
  position:absolute;
  top:-90px;
  left:0;
  transform-origin:bottom center;
  transform:rotateX(180deg); /* ⬅️ MẶC ĐỊNH: ĐÓNG */
  transition:transform .9s ease;
  z-index:2;
}

/* Khi bấm mở */
.open .envelope-flap{
  transform:rotateX(0deg); /* ⬅️ MỞ LÊN */
}

button{
  margin-top:20px;
  padding:12px 34px;
  border:none;
  border-radius:999px;
  background:#c62828;
  color:#fff;
  font-size:16px;
  cursor:pointer;
}

/* ================= THIỆP ================= */
#card-screen{
  position:fixed;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  background:url("tet-bg.png") center/cover no-repeat;
  opacity:0;
  pointer-events:none;
  transition:opacity 1s ease;
}

#card-screen.show{
  opacity:1;
  pointer-events:auto;
}

.card{
  background:#ffffffee;
  width:90%;
  max-width:560px;
  padding:34px 28px;
  border-radius:22px;
  text-align:center;
  box-shadow:0 30px 60px rgba(0,0,0,.35);
}

h1{
  font-family:'Dancing Script', cursive;
  font-size:38px;
  color:#b71c1c;
  margin-bottom:16px;
}

p{
  font-size:16px;
  line-height:1.7;
  color:#333;
}

/* ================= PHÁO HOA ================= */
.firework{
  position:fixed;
  width:5px;
  height:5px;
  border-radius:50%;
  animation:boom 1.3s linear infinite;
}

@keyframes boom{
  0%{transform:scale(0);opacity:1}
  100%{transform:scale(20);opacity:0}
}

@media(max-width:480px){
  h1{font-size:30px}
}
</style>
</head>

<body>

<!-- PHONG BÌ -->
<div id="envelope-screen">
  <div class="envelope" id="env">
    <div class="envelope-flap"></div>
    <div class="envelope-body"></div>
  </div>
  <button onclick="openCard()">Mở Thiệp</button>
</div>

<!-- THIỆP -->
<div id="card-screen">
  <div class="card">
    <h1>Chúc Mừng Năm Mới Bính Ngọ</h1>
    <p id="wish"></p>
  </div>
</div>

<audio id="music" src="tet-music.mp3" loop></audio>

<script>
const wishes=[
"Chúc năm mới an khang thịnh vượng, học tập tiến bộ và tràn đầy may mắn.",
"Mong Bính Ngọ mang đến sức khỏe, niềm vui và những thành công rực rỡ.",
"Chúc một năm mới bình an, nhiều năng lượng tích cực và hạnh phúc dài lâu."
];

function openCard(){
  document.getElementById("env").classList.add("open");

  setTimeout(()=>{
    document.getElementById("envelope-screen").style.opacity="0";
  },800);

  setTimeout(()=>{
    document.getElementById("envelope-screen").style.display="none";
    document.getElementById("card-screen").classList.add("show");
    document.getElementById("wish").innerText =
      wishes[Math.floor(Math.random()*wishes.length)];
    playMusic();
    fireworks();
  },1400);
}

function playMusic(){
  const m=document.getElementById("music");
  m.volume=0;
  m.play();
  let v=0;
  const fade=setInterval(()=>{
    if(v<1){v+=0.03;m.volume=v}
    else clearInterval(fade);
  },100);
}

function fireworks(){
  setInterval(()=>{
    const f=document.createElement("div");
    f.className="firework";
    f.style.left=Math.random()*100+"vw";
    f.style.top=Math.random()*100+"vh";
    f.style.background=`hsl(${Math.random()*360},100%,60%)`;
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),1300);
  },200);
}
</script>

</body>
</html>
