<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chúc Mừng Năm Mới Bính Ngọ</title>

<!-- Font -->
<link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#fbf4e6;
  font-family:"Be Vietnam Pro",sans-serif;
  overflow:hidden;
}

/* ===== NỀN TẾT (SAU KHI MỞ) ===== */
body.tet-bg{
  background:url("tet-bg.png") center center no-repeat;
  background-size:contain;
  background-color:#b71c1c;
}
@media(min-width:768px){
  body.tet-bg{background-size:cover;}
}

/* ===== PHONG BÌ ===== */
.envelope-wrapper{
  text-align:center;
}
.envelope{
  position:relative;
  width:320px;
  max-width:80vw;
  height:200px;
  margin:auto;
}

/* Thân phong bì */
.env-body{
  position:absolute;
  bottom:0;
  width:100%;
  height:140px;
  background:#d32f2f;
  border-radius:0 0 12px 12px;
  box-shadow:0 10px 25px rgba(0,0,0,.25);
}

/* Nắp phong bì – SỬA LỆCH 100% */
.env-flap{
  position:absolute;
  top:20px;
  left:0;
  width:100%;
  height:140px;
  background:#c62828;
  clip-path:polygon(0 0,100% 0,50% 65%);
  transform-origin:top center;
  transition:transform .9s ease;
  z-index:3;
}

/* Hai mép trong */
.env-left,.env-right{
  position:absolute;
  bottom:0;
  width:50%;
  height:140px;
  background:#e53935;
}
.env-left{
  left:0;
  clip-path:polygon(0 0,100% 100%,0 100%);
}
.env-right{
  right:0;
  clip-path:polygon(100% 0,100% 100%,0 100%);
}

/* Khi mở */
.envelope.open .env-flap{
  transform:rotateX(180deg);
}

/* NÚT */
.open-btn{
  margin-top:20px;
  padding:12px 28px;
  border:none;
  border-radius:30px;
  background:#d32f2f;
  color:#fff;
  font-size:18px;
  cursor:pointer;
}

/* ===== THIỆP ===== */
.card{
  display:none;
  max-width:650px;
  width:90%;
  background:rgba(255,255,255,.92);
  border-radius:20px;
  padding:28px;
  text-align:center;
  box-shadow:0 15px 40px rgba(0,0,0,.25);
  z-index:2;
}

.card h1{
  font-family:"Dancing Script",cursive;
  font-size:42px;
  color:#c62828;
}

.card p{
  font-size:17px;
  line-height:1.7;
  margin-top:14px;
}

/* ===== PHÁO HOA ===== */
canvas{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  pointer-events:none;
  z-index:1;
}
</style>
</head>

<body>

<canvas id="fireworks"></canvas>

<!-- PHONG BÌ -->
<div class="envelope-wrapper" id="envBox">
  <div class="envelope" id="envelope">
    <div class="env-flap"></div>
    <div class="env-left"></div>
    <div class="env-right"></div>
    <div class="env-body"></div>
  </div>
  <button class="open-btn" onclick="openCard()">Mở Thiệp</button>
</div>

<!-- THIỆP -->
<div class="card" id="card">
  <h1>Chúc Mừng Năm Mới Bính Ngọ</h1>
  <p id="wish"></p>
</div>

<!-- NHẠC -->
<audio id="music" src="tet-music.mp3" loop></audio>

<script>
/* ===== LỜI CHÚC ===== */
const wishes=[
"Chúc năm mới an khang thịnh vượng, học tập tiến bộ, mọi ước mơ đều thành hiện thực. Mong bạn luôn giữ được niềm vui, sự cố gắng và tinh thần lạc quan trong cuộc sống.",
"Xuân mới đến mang theo nhiều hy vọng. Chúc bạn sức khỏe dồi dào, học hành thuận lợi, mỗi ngày đều là một ngày tràn đầy năng lượng tích cực.",
"Năm mới Bính Ngọ, chúc bạn luôn bền bỉ, mạnh mẽ, vượt qua mọi thử thách, đạt được những thành quả xứng đáng trong học tập và cuộc sống."
];
document.getElementById("wish").innerText =
wishes[Math.floor(Math.random()*wishes.length)];

/* ===== MỞ THIỆP ===== */
function openCard(){
  document.getElementById("envelope").classList.add("open");
  setTimeout(()=>{
    document.getElementById("envBox").style.display="none";
    document.getElementById("card").style.display="block";
    document.body.classList.add("tet-bg");
    startMusic();
    startFireworks();
  },900);
}

/* ===== NHẠC FADE IN ===== */
function startMusic(){
  const m=document.getElementById("music");
  m.volume=0;
  m.play();
  let v=0;
  const fade=setInterval(()=>{
    v+=0.02;
    m.volume=Math.min(v,1);
    if(v>=1)clearInterval(fade);
  },120);
}

/* ===== PHÁO HOA ===== */
const canvas=document.getElementById("fireworks");
const ctx=canvas.getContext("2d");
function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}
window.onresize=resize;
resize();

let sparks=[];
function startFireworks(){
  setInterval(()=>{
    for(let i=0;i<40;i++){
      sparks.push({
        x:Math.random()*canvas.width,
        y:canvas.height,
        vx:(Math.random()-0.5)*6,
        vy:-Math.random()*9-6,
        life:60,
        color:`hsl(${Math.random()*360},100%,60%)`
      });
    }
  },900);

  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    sparks.forEach((s,i)=>{
      s.x+=s.vx;
      s.y+=s.vy;
      s.vy+=0.15;
      s.life--;
      ctx.fillStyle=s.color;
      ctx.fillRect(s.x,s.y,3,3);
      if(s.life<=0)sparks.splice(i,1);
    });
    requestAnimationFrame(draw);
  }
  draw();
}
</script>

</body>
</html>
